[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=Wallet Passes

[Database Metadata]
DATABASE=passes23.sqlite
PLATFORMS=IOS
VERSIONS=10,11

[Query Metadata]
QUERY_NAME=passes23_passes
ACTIVITY=Wallet Pass
KEY_TIMESTAMP=INGESTED DATE

[SQL Query 10,11]
QUERY=
	SELECT
		DATETIME(PASS.INGESTED_DATE+978307200,'UNIXEPOCH') AS "INGESTED DATE",
		DATETIME(PASS.MODIFIED_DATE+978307200,'UNIXEPOCH') AS "MODIFIED DATE",
		DATETIME(PASS.RELEVANT_DATE+978307200,'UNIXEPOCH') AS "RELEVANT TIME",
		PASS.ORGANIZATION_NAME AS "ORGANIZATION NAME",
		PASS_TYPE.IDENTIFIER AS "IDENTIFIER",
		LOCATION.RELEVANT_TEXT AS "RELEVANT TEXT",
		LOCATION.LATITUDE AS "LATITUDE",
		LOCATION.LONGITUDE AS "LONGITUDE",
		DATETIME(PASS.PUSH_REGISTRATION_DATE+978307200,'UNIXEPOCH') AS "PUSH REGISTRATION TIME",
		PASS.LAST_MODIFIED_TAG AS "LAST MODIFIED TAG",
		PASS.UNIQUE_ID AS "PASS ID"
	FROM PASS
	LEFT JOIN PASS_TYPE ON PASS.PASS_TYPE_PID == PASS_TYPE.PID
	LEFT JOIN PAYMENT_TRANSACTION ON PASS.PID == PAYMENT_TRANSACTION.PASS_PID
	LEFT JOIN LOCATION_SOURCE ON LOCATION_SOURCE.URL LIKE '%'||PASS.UNIQUE_ID||'%'
	LEFT JOIN LOCATION ON LOCATION.LOCATION_SOURCE_PID == LOCATION_SOURCE.PID
	WHERE AMOUNT IS NULL