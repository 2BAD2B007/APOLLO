[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=

[Database Metadata]
DATABASE=interactionC.db
PLATFORMS=IOS
VERSIONS=11

[Query Metadata]
QUERY_NAME=interaction_contact_interactions
ACTIVITY=App Usage
KEY_TIMESTAMP=START DATE

[SQL Query]
QUERY=
   SELECT
      DATETIME(ZINTERACTIONS.ZCREATIONDATE + 978307200, 'unixepoch') AS "ZINTERACTIONS CREATION DATE",
      ZINTERACTIONS.ZBUNDLEID,
      ZCONTACTS.ZDISPLAYNAME,
      ZCONTACTS.ZIDENTIFIER,
      ZCONTACTS.ZPERSONID,
      ZINTERACTIONS.ZDIRECTION,
      ZINTERACTIONS.ZISRESPONSE,
      ZINTERACTIONS.ZMECHANISM,
      ZINTERACTIONS.ZRECIPIENTCOUNT,
      DATETIME(ZCONTACTS.ZCREATIONDATE + 978307200, 'unixepoch') AS "ZCONTACTS CREATION DATE",
      DATETIME(ZINTERACTIONS.ZSTARTDATE + 978307200, 'unixepoch') AS "START DATE",
      DATETIME(ZINTERACTIONS.ZENDDATE + 978307200, 'unixepoch') AS "END DATE",
      DATETIME(ZCONTACTS.ZFIRSTINCOMINGRECIPIENTDATE + 978307200, 'unixepoch') AS "FIRST INCOMING RECIPIENT DATE",
      DATETIME(ZCONTACTS.ZFIRSTINCOMINGSENDERDATE + 978307200, 'unixepoch') AS "FIRST INCOMING SENDER DATE",
      DATETIME(ZCONTACTS.ZFIRSTOUTGOINGRECIPIENTDATE + 978307200, 'unixepoch') AS "FIRST OUTGOING RECIPIENT DATE",
      DATETIME(ZCONTACTS.ZLASTINCOMINGSENDERDATE + 978307200, 'unixepoch') AS "LAST INCOMING SENDER DATE",
      CASE
         ZLASTINCOMINGRECIPIENTDATE 
         WHEN
            "0" 
         THEN
            "0" 
         ELSE
            DATETIME(ZCONTACTS.ZLASTINCOMINGRECIPIENTDATE + 978307200, 'unixepoch') 
      END AS "LAST INCOMING RECIPIENT DATE", 
      DATETIME(ZCONTACTS.ZLASTOUTGOINGRECIPIENTDATE + 978307200, 'unixepoch') AS "LAST OUTGOING RECIPIENT DATE", 
      ZINTERACTIONS.ZACCOUNT, 
      ZINTERACTIONS.ZDOMAINIDENTIFIER, 
      ZCONTACTS.ZINCOMINGRECIPIENTCOUNT, 
      ZCONTACTS.ZINCOMINGSENDERCOUNT, 
      ZCONTACTS.ZOUTGOINGRECIPIENTCOUNT, 
      ZCONTACTS.ZCUSTOMIDENTIFIER, 
      ZINTERACTIONS.ZCONTENTURL, 
      ZINTERACTIONS.ZLOCATIONUUID, 
      ZINTERACTIONS.Z_PK AS "ZINTERACTIONS TABLE ID" 
   FROM
      ZINTERACTIONS 
      LEFT JOIN
         ZCONTACTS 
         ON ZINTERACTIONS.ZSENDER = ZCONTACTS.Z_PK