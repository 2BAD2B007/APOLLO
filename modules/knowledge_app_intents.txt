[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=Application intents, provides application context.

[Database Metadata]
DATABASE=knowledgeC.db
PLATFORM=IOS,MACOS
VERSIONS=11,12,13,10.13,10.14,10.15

[Query Metadata]
QUERY_NAME=knowledge_app_intents
ACTIVITY=Application Intents
KEY_TIMESTAMP=START

[SQL Query 13,10.15]
QUERY=
	SELECT
		DATETIME(ZOBJECT.ZSTARTDATE+978307200,'UNIXEPOCH') AS "START", 
		DATETIME(ZOBJECT.ZENDDATE+978307200,'UNIXEPOCH') AS "END",
		ZOBJECT.ZVALUESTRING AS "APP NAME", 
		ZSOURCE.ZBUNDLEID AS "BUNDLE ID", 
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTVERB AS "INTENT VERB", 
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTCLASS AS "INTENT CLASS", 
		ZSOURCE.ZDEVICEID AS "DEVICE ID",
		ZSOURCE.ZGROUPID AS "GROUP ID",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__DERIVEDINTENTIDENTIFIER AS "DERIVED INTENT ID",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__DIRECTION AS "DIRECTION",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__DONATEDBYSIRI AS "DONATED BY SIRI",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTHANDLINGSTATUS AS "HANDLING STATUS",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTTYPE AS "INTENT TYPE",
		ZSOURCE.ZITEMID AS "ITEM ID",
		ZSOURCE.ZSOURCEID AS "SOURCE ID",
		HEX(ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__SERIALIZEDINTERACTION) AS "SERIALIZED INTERACTION (HEX)", 
		CASE ZOBJECT.ZSTARTDAYOFWEEK 
			WHEN "1" THEN "Sunday"
			WHEN "2" THEN "Monday"
			WHEN "3" THEN "Tuesday"
			WHEN "4" THEN "Wednesday"
			WHEN "5" THEN "Thursday"
			WHEN "6" THEN "Friday"
			WHEN "7" THEN "Saturday"
		END "DAY OF WEEK",
		ZOBJECT.ZSECONDSFROMGMT/3600 AS "GMT OFFSET",
		DATETIME(ZOBJECT.ZCREATIONDATE+978307200,'UNIXEPOCH') AS "ENTRY CREATION",
		ZOBJECT.ZUUID AS "UUID",	
		ZSTRUCTUREDMETADATA.ZMETADATAHASH,
		ZOBJECT.Z_PK AS "ZOBJECT TABLE ID" 
	FROM ZOBJECT
	      LEFT JOIN
         ZSTRUCTUREDMETADATA 
         ON ZOBJECT.ZSTRUCTUREDMETADATA = ZSTRUCTUREDMETADATA.Z_PK 
      LEFT JOIN
         ZSOURCE 
         ON ZOBJECT.ZSOURCE = ZSOURCE.Z_PK 
	WHERE
	   ZSTREAMNAME IS "/app/intents"

[SQL Query 11,12,10.13,10.14]
QUERY=
	SELECT
		DATETIME(ZOBJECT.ZSTARTDATE+978307200,'UNIXEPOCH') AS "START", 
		DATETIME(ZOBJECT.ZENDDATE+978307200,'UNIXEPOCH') AS "END",
		ZOBJECT.ZVALUESTRING AS "APP NAME", 
		ZSOURCE.ZBUNDLEID AS "BUNDLE ID", 
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTVERB AS "INTENT VERB", 
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTCLASS AS "INTENT CLASS", 
		ZSOURCE.ZDEVICEID AS "DEVICE ID",
		ZSOURCE.ZGROUPID AS "GROUP ID",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__DONATEDBYSIRI AS "DONATED BY SIRI",
		ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__INTENTHANDLINGSTATUS AS "HANDLING STATUS",
		ZSOURCE.ZITEMID AS "ITEM ID",
		ZSOURCE.ZSOURCEID AS "SOURCE ID",
		HEX(ZSTRUCTUREDMETADATA.Z_DKINTENTMETADATAKEY__SERIALIZEDINTERACTION) AS "SERIALIZED INTERACTION (HEX)", 
		CASE ZOBJECT.ZSTARTDAYOFWEEK 
			WHEN "1" THEN "Sunday"
			WHEN "2" THEN "Monday"
			WHEN "3" THEN "Tuesday"
			WHEN "4" THEN "Wednesday"
			WHEN "5" THEN "Thursday"
			WHEN "6" THEN "Friday"
			WHEN "7" THEN "Saturday"
		END "DAY OF WEEK",
		ZOBJECT.ZSECONDSFROMGMT/3600 AS "GMT OFFSET",
		DATETIME(ZOBJECT.ZCREATIONDATE+978307200,'UNIXEPOCH') AS "ENTRY CREATION",
		ZOBJECT.ZUUID AS "UUID",	
		ZSTRUCTUREDMETADATA.ZMETADATAHASH,
		ZOBJECT.Z_PK AS "ZOBJECT TABLE ID" 
	FROM ZOBJECT
	      LEFT JOIN
         ZSTRUCTUREDMETADATA 
         ON ZOBJECT.ZSTRUCTUREDMETADATA = ZSTRUCTUREDMETADATA.Z_PK 
      LEFT JOIN
         ZSOURCE 
         ON ZOBJECT.ZSOURCE = ZSOURCE.Z_PK 
	WHERE
	   ZSTREAMNAME IS "/app/intents"	   