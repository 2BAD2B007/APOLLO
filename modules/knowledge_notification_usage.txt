[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=Notification Usage

[Database Metadata]
DATABASE=knowledgeC.db
PLATFORMS=IOS
VERSIONS=12,13

[Query Metadata]
QUERY_NAME=knowledge_notification_usage
ACTIVITY=Notification Usage
KEY_TIMESTAMP=ENTRY CREATION

[SQL Query 12,13]
QUERY=
   SELECT
      ZSTRUCTUREDMETADATA.Z_DKNOTIFICATIONUSAGEMETADATAKEY__BUNDLEID AS "BUNDLE ID",
      ZOBJECT.ZVALUESTRING AS "NOTIFICATION TYPE", 
      ZSOURCE.ZDEVICEID AS "DEVICE ID (HARDWARE UUID)",  
      ZSTRUCTUREDMETADATA.Z_DKNOTIFICATIONUSAGEMETADATAKEY__IDENTIFIER AS "ID", 
      CASE ZOBJECT.ZSTARTDAYOFWEEK 
         WHEN "1" THEN "Sunday"
         WHEN "2" THEN "Monday"
         WHEN "3" THEN "Tuesday"
         WHEN "4" THEN "Wednesday"
         WHEN "5" THEN "Thursday"
         WHEN "6" THEN "Friday"
         WHEN "7" THEN "Saturday"
      END "DAY OF WEEK",
      ZOBJECT.ZSECONDSFROMGMT/3600 AS "GMT OFFSET",
      DATETIME(ZOBJECT.ZSTARTDATE+978307200,'UNIXEPOCH') as "START", 
      DATETIME(ZOBJECT.ZENDDATE+978307200,'UNIXEPOCH') as "END",
      DATETIME(ZOBJECT.ZCREATIONDATE+978307200,'UNIXEPOCH') as "ENTRY CREATION", 
      ZOBJECT.ZUUID AS "UUID",
      ZOBJECT.Z_PK AS "ZOBJECT TABLE ID" 
   FROM
      ZOBJECT 
      LEFT JOIN
         ZSTRUCTUREDMETADATA 
         ON ZOBJECT.ZSTRUCTUREDMETADATA = ZSTRUCTUREDMETADATA.Z_PK 
      LEFT JOIN
         ZSOURCE 
         ON ZOBJECT.ZSOURCE = ZSOURCE.Z_PK 
   WHERE
      ZSTREAMNAME = "/notification/usage" 