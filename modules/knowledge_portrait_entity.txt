[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=Portrait Entity

[Database Metadata]
DATABASE=knowledgeC.db
PLATFORM=IOS,MACOS
VERSIONS=12,13,10.13,10.14,10.15

[Query Metadata]
QUERY_NAME=knowledge_portrait_entity
ACTIVITY=Portrait Entity
KEY_TIMESTAMP=START

[SQL Query 12,13,10.13,10.14,10.15]
QUERY=
   SELECT
      DATETIME(ZOBJECT.ZSTARTDATE+978307200,'UNIXEPOCH') as "START", 
      DATETIME(ZOBJECT.ZENDDATE+978307200,'UNIXEPOCH') as "END",
      ZSTRUCTUREDMETADATA.Z_CDENTITYMETADATAKEY__NAME AS "NAME",
      ZSOURCE.ZBUNDLEID AS "SOURCE BUNDLE ID",
      ZSTRUCTUREDMETADATA.Z_CDPORTRAITMETADATAKEY__OSBUILD AS "OS BUILD",
      ZSOURCE.ZDEVICEID AS "DEVICE ID (HARDWARE UUID)",
      ZSOURCE.ZGROUPID AS "GROUP ID", 
      ZSOURCE.ZITEMID AS "ITEM ID",   
      ZSOURCE.ZSOURCEID AS "SOURCE ID",
      ZSTRUCTUREDMETADATA.Z_CDPORTRAITMETADATAKEY__ASSETVERSION AS "ASSET VERSION",
      ZSTRUCTUREDMETADATA.Z_CDENTITYMETADATAKEY__BESTLANGUAGE AS "BEST LANGUAGE",
      ZOBJECT.ZVALUEINTEGER AS "VALUE", 
      CASE ZOBJECT.ZSTARTDAYOFWEEK 
         WHEN "1" THEN "Sunday"
         WHEN "2" THEN "Monday"
         WHEN "3" THEN "Tuesday"
         WHEN "4" THEN "Wednesday"
         WHEN "5" THEN "Thursday"
         WHEN "6" THEN "Friday"
         WHEN "7" THEN "Saturday"
      END "DAY OF WEEK",
      ZOBJECT.ZSECONDSFROMGMT/3600 AS "GMT OFFSET",
      DATETIME(ZOBJECT.ZCREATIONDATE+978307200,'UNIXEPOCH') as "ENTRY CREATION",
      ZOBJECT.ZUUID AS "UUID", 
      ZOBJECT.Z_PK AS "ZOBJECT TABLE ID" 
   FROM
      ZOBJECT 
      LEFT JOIN
         ZSTRUCTUREDMETADATA 
         ON ZOBJECT.ZSTRUCTUREDMETADATA = ZSTRUCTUREDMETADATA.Z_PK 
      LEFT JOIN
         ZSOURCE 
         ON ZOBJECT.ZSOURCE = ZSOURCE.Z_PK 
   WHERE
      ZSTREAMNAME = "/portrait/entity" 